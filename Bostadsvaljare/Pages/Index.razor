@page "/"

@using Syncfusion.Blazor.SplitButtons

@inject IJSRuntime JSRuntime
@inject NavigationManager navManager


<div id="selector">
    <img id="overview" src="@OverviewImg" usemap="#housingmap">
    <map name="housingmap">
        <area status="available" href="#" @onmouseover="@(e => ShowTooltip(e, "A table!"))" @onmouseout="HideTooltip" @onclick="@(() => HousingClicked(""))" shape="poly" coords="1468,899,1479,825,1154,813,1127,854,1270,899,1369,900">
    </map>
</div>

<div id="tipmsg"></div>

<div id="sun_study">
    <SfDropDownButton IconCss="e-ddb-icons e-profile" CssClass="e-caret-hide e-background">
        <DropDownButtonEvents OnOpen="OpenTop" ItemSelected="ChangeSunStudy" />
        <DropDownButtonItems>
            <DropDownButtonItem Id="0" Text="Morgon" IconCss="e-ddb-icons"></DropDownButtonItem>
            <DropDownButtonItem Id="1" Text="Mitt på dagen" IconCss="e-ddb-icons"></DropDownButtonItem>
            <DropDownButtonItem Id="2" Text="Kväll" IconCss="e-ddb-icons"></DropDownButtonItem>
        </DropDownButtonItems>
    </SfDropDownButton>
</div>


@code {
    public class SunStudyData
    {
        public string Name { get; set; }
        public string ImagePath { get; set; }
    }

    List<SunStudyData> SunStudies = new List<SunStudyData> {
        new SunStudyData() {Name = "Morgon", ImagePath = "IMG/PhysCam006.jpg"},
        new SunStudyData() {Name = "Mitt på dagen", ImagePath = "IMG/Imagemapbild.jpg"},
        new SunStudyData() {Name = "Kväll", ImagePath = "IMG/20200128_PhysCamera001.jpg"}
    };

    private string OverviewImg { get; set; }
    public List<Houses> DataSource { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        this.DataSource = Houses.GetHouseData();
        this.OverviewImg = SunStudies[1].ImagePath;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender) {
            await JSRuntime.InvokeVoidAsync(
                "util.addMapHilights"
            );
        }
    }

    public void OpenTop(Syncfusion.Blazor.SplitButtons.BeforeOpenCloseMenuEventArgs args)
    {
        args.Element.SetAttribute("style", "margin:-169px -115px");
    }

    public async void ChangeSunStudy(Syncfusion.Blazor.SplitButtons.MenuEventArgs args)
    {
        int ind = int.Parse(args.Element.ID);
        this.OverviewImg = SunStudies[ind].ImagePath;
        await JSRuntime.InvokeVoidAsync(
            "util.changeMapImage", this.OverviewImg
        );
    }

    public async void ShowTooltip(MouseEventArgs e, String buttonNumber)
    {
        await JSRuntime.InvokeAsync<string>(
            "util.showTooltip", e.ClientX, e.ClientY, buttonNumber
        );
    }

    public async void HideTooltip()
    {
        await JSRuntime.InvokeAsync<string>(
            "util.hideTooltip"
        );
    }

    private void HousingClicked(string housing)
    {
        if (housing != "")
            navManager.NavigateTo("/interior/"+ housing);
        else
            navManager.NavigateTo("/interior");
    }

    public class Houses
    {
        public double Sqm { get; set; }
        public string Price { get; set; }
        public double LandArea { get; set; }
        public string HouseNumber { get; set; }
        public string Status { get; set; }

        public static List<Houses> GetHouseData()
        {
            List<Houses> HouseData = new List<Houses>();
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7a", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "7b", Status = "Ledig" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8a", Status = "Reserverad" });
            HouseData.Add(new Houses { Sqm = 152, Price = "5 000 000", LandArea = 380, HouseNumber = "8b", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 160, Price = "5 500 000", LandArea = 490, HouseNumber = "9a", Status = "Sålt" });
            HouseData.Add(new Houses { Sqm = 170, Price = "5 600 000", LandArea = 440, HouseNumber = "9a", Status = "Sålt" });

            return HouseData;
        }
    }
}


<style>
    @@font-face {
        font-family: 'e-ddb-icons';
        src: url(data:application/x-font-ttf;charset=utf-8;base64,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) format('truetype');
        font-weight: normal;
        font-style: normal;
    }

    #selector {
        margin-bottom: 5px;
    }

    #overview {
        width: 80%;
    }

    #housing_list {
        width: 49%;
        display: inline-block;
        float: right;
    }

    #tipmsg {
        display: none;
        position: absolute;
        background-color: #F0F0F0;
        color: black;
        padding-left: 5px;
        padding-right: 5px;
        border-radius: 7px;
        white-space: pre-wrap;
        pointer-events: none;
    }

    #sun_study {
        position: fixed;
        bottom: 0px;
        right: 0px;
    }

    #sun_study-icon:hover {
        width: 50px;
    }

    .hidden {
        display: none;
    }

    .icon {
        width: 32px;
        transition-duration: 0.4s;
    }

    .e-background {
        width: 50px;
    }

    .e-ddb-icons {
        font-family: 'e-ddb-icons';
        font-size: 45px;
        font-style: normal;
        font-weight: normal;
        font-variant: normal;
        text-transform: none;
        speak: none;
        line-height: 1;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .e-profile::before {
        content: url(IMG/icons/sundial_tiny.png);
    }
</style>
